let t;function e(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var n,r,i,a,o,l=globalThis,s={},c={},u=l.parcelRequire94c2;null==u&&((u=function(t){if(t in s)return s[t].exports;if(t in c){var e=c[t];delete c[t];var n={id:t,exports:{}};return s[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){c[t]=e},l.parcelRequire94c2=u);var h=u.register;function f(t){return t}function d(t){return"translate("+t+",0)"}function g(t){return"translate(0,"+t+")"}function p(){return!this.__axis}function y(t,e){var n=[],r=null,i=null,a=6,o=6,l=3,s="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===t||4===t?-1:1,u=4===t||2===t?"x":"y",h=1===t||3===t?d:g;function y(d){var g=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,y=null==i?e.tickFormat?e.tickFormat.apply(e,n):f:i,m=Math.max(a,0)+l,v=e.range(),b=+v[0]+s,x=+v[v.length-1]+s,w=(e.bandwidth?function(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}:function(t){return e=>+t(e)})(e.copy(),s),_=d.selection?d.selection():d,S=_.selectAll(".domain").data([null]),M=_.selectAll(".tick").data(g,e).order(),k=M.exit(),O=M.enter().append("g").attr("class","tick"),A=M.select("line"),E=M.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(O),A=A.merge(O.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),E=E.merge(O.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),d!==_&&(S=S.transition(d),M=M.transition(d),A=A.transition(d),E=E.transition(d),k=k.transition(d).attr("opacity",1e-6).attr("transform",function(t){return isFinite(t=w(t))?h(t+s):this.getAttribute("transform")}),O.attr("opacity",1e-6).attr("transform",function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:w(t))+s)})),k.remove(),S.attr("d",4===t||2===t?o?"M"+c*o+","+b+"H"+s+"V"+x+"H"+c*o:"M"+s+","+b+"V"+x:o?"M"+b+","+c*o+"V"+s+"H"+x+"V"+c*o:"M"+b+","+s+"H"+x),M.attr("opacity",1).attr("transform",function(t){return h(w(t)+s)}),A.attr(u+"2",c*a),E.attr(u,c*m).text(y),_.filter(p).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),_.each(function(){this.__axis=w})}return y.scale=function(t){return arguments.length?(e=t,y):e},y.ticks=function(){return n=Array.from(arguments),y},y.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),y):n.slice()},y.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),y):r&&r.slice()},y.tickFormat=function(t){return arguments.length?(i=t,y):i},y.tickSize=function(t){return arguments.length?(a=o=+t,y):a},y.tickSizeInner=function(t){return arguments.length?(a=+t,y):a},y.tickSizeOuter=function(t){return arguments.length?(o=+t,y):o},y.tickPadding=function(t){return arguments.length?(l=+t,y):l},y.offset=function(t){return arguments.length?(s=+t,y):s},y}h("27Lyk",function(t,n){e(t.exports,"register",()=>r,t=>r=t);var r,i=new Map;r=function(t,e){for(var n=0;n<e.length-1;n+=2)i.set(e[n],{baseUrl:t,path:e[n+1]})}}),h("bYoiY",function(t,n){e(t.exports,"Color",()=>i),e(t.exports,"darker",()=>a),e(t.exports,"brighter",()=>o),e(t.exports,"default",()=>w),e(t.exports,"hslConvert",()=>D),e(t.exports,"Rgb",()=>O),e(t.exports,"rgbConvert",()=>M),e(t.exports,"rgb",()=>k),e(t.exports,"hsl",()=>H);var r=u("bfWFq");function i(){}var a=.7,o=1.4285714285714286,l="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,f=RegExp(`^rgb\\(${l},${l},${l}\\)$`),d=RegExp(`^rgb\\(${c},${c},${c}\\)$`),g=RegExp(`^rgba\\(${l},${l},${l},${s}\\)$`),p=RegExp(`^rgba\\(${c},${c},${c},${s}\\)$`),y=RegExp(`^hsl\\(${s},${c},${c}\\)$`),m=RegExp(`^hsla\\(${s},${c},${c},${s}\\)$`),v={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function b(){return this.rgb().formatHex()}function x(){return this.rgb().formatRgb()}function w(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=h.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?_(e):3===n?new O(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?S(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?S(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=f.exec(t))?new O(e[1],e[2],e[3],1):(e=d.exec(t))?new O(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=g.exec(t))?S(e[1],e[2],e[3],e[4]):(e=p.exec(t))?S(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=y.exec(t))?j(e[1],e[2]/100,e[3]/100,1):(e=m.exec(t))?j(e[1],e[2]/100,e[3]/100,e[4]):v.hasOwnProperty(t)?_(v[t]):"transparent"===t?new O(NaN,NaN,NaN,0):null}function _(t){return new O(t>>16&255,t>>8&255,255&t,1)}function S(t,e,n,r){return r<=0&&(t=e=n=NaN),new O(t,e,n,r)}function M(t){return(t instanceof i||(t=w(t)),t)?new O((t=t.rgb()).r,t.g,t.b,t.opacity):new O}function k(t,e,n,r){return 1==arguments.length?M(t):new O(t,e,n,null==r?1:r)}function O(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function A(){return`#${F(this.r)}${F(this.g)}${F(this.b)}`}function E(){let t=L(this.opacity);return`${1===t?"rgb(":"rgba("}${N(this.r)}, ${N(this.g)}, ${N(this.b)}${1===t?")":`, ${t})`}`}function L(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function N(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function F(t){return((t=N(t))<16?"0":"")+t.toString(16)}function j(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new R(t,e,n,r)}function D(t){if(t instanceof R)return new R(t.h,t.s,t.l,t.opacity);if(t instanceof i||(t=w(t)),!t)return new R;if(t instanceof R)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),o=Math.max(e,n,r),l=NaN,s=o-a,c=(o+a)/2;return s?(l=e===o?(n-r)/s+(n<r)*6:n===o?(r-e)/s+2:(e-n)/s+4,s/=c<.5?o+a:2-o-a,l*=60):s=c>0&&c<1?0:l,new R(l,s,c,t.opacity)}function H(t,e,n,r){return 1==arguments.length?D(t):new R(t,e,n,null==r?1:r)}function R(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function T(t){return(t=(t||0)%360)<0?t+360:t}function $(t){return Math.max(0,Math.min(1,t||0))}function I(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}(0,r.default)(i,w,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:b,formatHex:b,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return D(this).formatHsl()},formatRgb:x,toString:x}),(0,r.default)(O,k,(0,r.extend)(i,{brighter(t){return t=null==t?o:Math.pow(o,t),new O(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?a:Math.pow(a,t),new O(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new O(N(this.r),N(this.g),N(this.b),L(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:A,formatHex:A,formatHex8:function(){return`#${F(this.r)}${F(this.g)}${F(this.b)}${F((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:E,toString:E})),(0,r.default)(R,H,(0,r.extend)(i,{brighter(t){return t=null==t?o:Math.pow(o,t),new R(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?a:Math.pow(a,t),new R(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new O(I(t>=240?t-240:t+120,i,r),I(t,i,r),I(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new R(T(this.h),$(this.s),$(this.l),L(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=L(this.opacity);return`${1===t?"hsl(":"hsla("}${T(this.h)}, ${100*$(this.s)}%, ${100*$(this.l)}%${1===t?")":`, ${t})`}`}}))}),h("bfWFq",function(t,n){function r(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}e(t.exports,"default",()=>r),e(t.exports,"extend",()=>i)}),h("hTyzv",function(t,e){t.exports=new URL("background-bottom-base.62d17607.png",import.meta.url).toString()}),h("3Sg88",function(t,e){t.exports=new URL("background-top-downhill.0b8ffaf0.jpg",import.meta.url).toString()}),h("8XzkL",function(t,e){t.exports=new URL("icon_01.f492d6cf.svg",import.meta.url).toString()}),h("k6sew",function(t,e){t.exports=new URL("icon_02.23bcbf82.svg",import.meta.url).toString()}),h("CDwt9",function(t,e){t.exports=new URL("icon_03.d90e5100.svg",import.meta.url).toString()}),h("dGUO7",function(t,e){t.exports=new URL("icon_04.c3ca6339.svg",import.meta.url).toString()}),h("kY81L",function(t,e){t.exports=new URL("icon_count.53af4176.svg",import.meta.url).toString()}),h("dayu4",function(t,e){t.exports=new URL("icon_fill.0c5f9c5d.svg",import.meta.url).toString()}),h("gN9fG",function(t,e){t.exports=new URL("icon_graph.fc26b873.svg",import.meta.url).toString()}),h("85GN7",function(t,e){t.exports=new URL("icon_linear1.fb07cfa6.svg",import.meta.url).toString()}),h("iF2ue",function(t,e){t.exports=new URL("icon_linear2.67c3902e.svg",import.meta.url).toString()}),h("8wXJJ",function(t,e){t.exports=new URL("icon_map.51e79a94.svg",import.meta.url).toString()}),h("5HHoh",function(t,e){t.exports=new URL("icon_navigation.50d20d52.svg",import.meta.url).toString()}),h("gEANH",function(t,e){t.exports=new URL("icon_number.0c4385f4.svg",import.meta.url).toString()}),h("oTQjj",function(t,e){t.exports=new URL("icon_radial.0d18d4fc.svg",import.meta.url).toString()}),h("asQUY",function(t,e){t.exports=new URL("icon_sound.f5a7ceae.svg",import.meta.url).toString()}),h("2ywuS",function(t,e){t.exports=new URL("icon_symbol.dfa9b04c.svg",import.meta.url).toString()}),h("6ZUZW",function(t,e){t.exports=new URL("icon_text.8704b1bb.svg",import.meta.url).toString()}),u("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["5SCbD","index.a04c5f49.js","aeEpF","background-bottom-base.62d17607.png","1Vjxo","background-top-downhill.0b8ffaf0.jpg","jhR8M","icon_01.f492d6cf.svg","hKGDI","icon_02.23bcbf82.svg","iIvjG","icon_03.d90e5100.svg","9YsDV","icon_04.c3ca6339.svg","3WgAY","icon_count.53af4176.svg","1NnOo","icon_fill.0c5f9c5d.svg","cmmKr","icon_graph.fc26b873.svg","1JYGl","icon_linear1.fb07cfa6.svg","27teF","icon_linear2.67c3902e.svg","j2rfZ","icon_map.51e79a94.svg","1wlV5","icon_navigation.50d20d52.svg","3DYQu","icon_number.0c4385f4.svg","3LLYo","icon_radial.0d18d4fc.svg","1SAnl","icon_sound.f5a7ceae.svg","IMW4H","icon_symbol.dfa9b04c.svg","bT3E4","icon_text.8704b1bb.svg"]'));var m={value:()=>{}};function v(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw Error("illegal type: "+t);r[t]=[]}return new b(r)}function b(t){this._=t}function x(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=m,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function w(){}function _(t){return null==t?w:function(){return this.querySelector(t)}}function S(){return[]}function M(t){return null==t?S:function(){return this.querySelectorAll(t)}}function k(t){return function(){return this.matches(t)}}function O(t){return function(e){return e.matches(t)}}b.prototype=v.prototype={constructor:b,on:function(t,e){var n,r=this._,i=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw Error("unknown type: "+t);return{type:t,name:e}}),a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((n=(t=i[a]).type)&&(n=function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(r[n],t.name)))return n;return}if(null!=e&&"function"!=typeof e)throw Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=x(r[n],t.name,e);else if(null==e)for(n in r)r[n]=x(r[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new b(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(r=this._[t],a=0,n=r.length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var A=Array.prototype.find;function E(){return this.firstElementChild}var L=Array.prototype.filter;function N(){return Array.from(this.children)}function F(t){return Array(t.length)}function j(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function D(t,e,n,r,i,a){for(var o,l=0,s=e.length,c=a.length;l<c;++l)(o=e[l])?(o.__data__=a[l],r[l]=o):n[l]=new j(t,a[l]);for(;l<s;++l)(o=e[l])&&(i[l]=o)}function H(t,e,n,r,i,a,o){var l,s,c,u=new Map,h=e.length,f=a.length,d=Array(h);for(l=0;l<h;++l)(s=e[l])&&(d[l]=c=o.call(s,s.__data__,l,e)+"",u.has(c)?i[l]=s:u.set(c,s));for(l=0;l<f;++l)c=o.call(t,a[l],l,a)+"",(s=u.get(c))?(r[l]=s,s.__data__=a[l],u.delete(c)):n[l]=new j(t,a[l]);for(l=0;l<h;++l)(s=e[l])&&u.get(d[l])===s&&(i[l]=s)}function R(t){return t.__data__}function T(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}j.prototype={constructor:j,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var $="http://www.w3.org/1999/xhtml",I={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function P(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),I.hasOwnProperty(e)?{space:I[e],local:t}:t}function C(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function U(t,e){return t.style.getPropertyValue(e)||C(t).getComputedStyle(t,null).getPropertyValue(e)}function B(t){return t.trim().split(/^|\s+/)}function q(t){return t.classList||new V(t)}function V(t){this._node=t,this._names=B(t.getAttribute("class")||"")}function Y(t,e){for(var n=q(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function X(t,e){for(var n=q(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function z(){this.textContent=""}function G(){this.innerHTML=""}function K(){this.nextSibling&&this.parentNode.appendChild(this)}function W(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Q(t){var e=P(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===$&&e.documentElement.namespaceURI===$?e.createElement(t):e.createElementNS(n,t)}})(e)}function Z(){return null}function J(){var t=this.parentNode;t&&t.removeChild(this)}function tt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function te(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tn(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)(n=e[r],t.type&&n.type!==t.type||n.name!==t.name)?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function tr(t,e,n){return function(){var r,i=this.__on,a=function(t){e.call(this,t,this.__data__)};if(i){for(var o=0,l=i.length;o<l;++o)if((r=i[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=e;return}}this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function ti(t,e,n){var r=C(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}V.prototype={add:function(t){0>this._names.indexOf(t)&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ta=[null];function to(t,e){this._groups=t,this._parents=e}function tl(){return new to([[document.documentElement]],ta)}function ts(t){return"string"==typeof t?new to([[document.querySelector(t)]],[document.documentElement]):new to([[t]],ta)}to.prototype=tl.prototype={constructor:to,select:function(t){"function"!=typeof t&&(t=_(t));for(var e=this._groups,n=e.length,r=Array(n),i=0;i<n;++i)for(var a,o,l=e[i],s=l.length,c=r[i]=Array(s),u=0;u<s;++u)(a=l[u])&&(o=t.call(a,a.__data__,u,l))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new to(r,this._parents)},selectAll:function(t){if("function"==typeof t){var e;e=t,t=function(){var t;return t=e.apply(this,arguments),null==t?[]:Array.isArray(t)?t:Array.from(t)}}else t=M(t);for(var n=this._groups,r=n.length,i=[],a=[],o=0;o<r;++o)for(var l,s=n[o],c=s.length,u=0;u<c;++u)(l=s[u])&&(i.push(t.call(l,l.__data__,u,s)),a.push(l));return new to(i,a)},selectChild:function(t){var e;return this.select(null==t?E:(e="function"==typeof t?t:O(t),function(){return A.call(this.children,e)}))},selectChildren:function(t){var e;return this.selectAll(null==t?N:(e="function"==typeof t?t:O(t),function(){return L.call(this.children,e)}))},filter:function(t){"function"!=typeof t&&(t=k(t));for(var e=this._groups,n=e.length,r=Array(n),i=0;i<n;++i)for(var a,o=e[i],l=o.length,s=r[i]=[],c=0;c<l;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&s.push(a);return new to(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,R);var n=e?H:D,r=this._parents,i=this._groups;"function"!=typeof t&&(v=t,t=function(){return v});for(var a=i.length,o=Array(a),l=Array(a),s=Array(a),c=0;c<a;++c){var u=r[c],h=i[c],f=h.length,d="object"==typeof(m=t.call(u,u&&u.__data__,c,r))&&"length"in m?m:Array.from(m),g=d.length,p=l[c]=Array(g),y=o[c]=Array(g);n(u,h,p,y,s[c]=Array(f),d,e);for(var m,v,b,x,w=0,_=0;w<g;++w)if(b=p[w]){for(w>=_&&(_=w+1);!(x=y[_])&&++_<g;);b._next=x||null}}return(o=new to(o,r))._enter=l,o._exit=s,o},enter:function(){return new to(this._enter||this._groups.map(F),this._parents)},exit:function(){return new to(this._exit||this._groups.map(F),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),l=Array(i),s=0;s<o;++s)for(var c,u=n[s],h=r[s],f=u.length,d=l[s]=Array(f),g=0;g<f;++g)(c=u[g]||h[g])&&(d[g]=c);for(;s<i;++s)l[s]=n[s];return new to(l,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=T);for(var n=this._groups,r=n.length,i=Array(r),a=0;a<r;++a){for(var o,l=n[a],s=l.length,c=i[a]=Array(s),u=0;u<s;++u)(o=l[u])&&(c[u]=o);c.sort(e)}return new to(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(let e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,l=a.length;o<l;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=P(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):U(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=B(t+"");if(arguments.length<2){for(var r=q(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?Y:X)(this,t)}}:e?function(t){return function(){Y(this,t)}}:function(t){return function(){X(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?z:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?G:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(K)},lower:function(){return this.each(W)},append:function(t){var e="function"==typeof t?t:Q(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:Q(t),r=null==e?Z:"function"==typeof e?e:_(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(J)},clone:function(t){return this.select(t?te:tt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=a.length;if(arguments.length<2){var l=this.node().__on;if(l){for(var s,c=0,u=l.length;c<u;++c)for(r=0,s=l[c];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value}return}for(r=0,l=e?tr:tn;r<o;++r)this.each(l(a[r],e,n));return this},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return ti(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return ti(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};const tc={passive:!1},tu={capture:!0,passive:!1};function th(t){t.stopImmediatePropagation()}function tf(t){t.preventDefault(),t.stopImmediatePropagation()}var td=(u("bYoiY"),u("bYoiY"));function tg(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}var tp=t=>()=>t;function ty(t,e){var n=e-t;return n?function(e){return t+e*n}:tp(isNaN(t)?e:t)}var tm=function t(e){var n,r=1==(n=+e)?ty:function(t,e){var r,i,a;return e-t?(r=t,i=e,r=Math.pow(r,a=n),i=Math.pow(i,a)-r,a=1/a,function(t){return Math.pow(r+t*i,a)}):tp(isNaN(t)?e:t)};function i(t,e){var n=r((t=(0,td.rgb)(t)).r,(e=(0,td.rgb)(e)).r),i=r(t.g,e.g),a=r(t.b,e.b),o=ty(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);function tv(t){return function(e){var n,r,i=e.length,a=Array(i),o=Array(i),l=Array(i);for(n=0;n<i;++n)r=(0,td.rgb)(e[n]),a[n]=r.r||0,o[n]=r.g||0,l[n]=r.b||0;return a=t(a),o=t(o),l=t(l),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=l(t),r+""}}}function tb(t,e){return t*=1,e*=1,function(n){return t*(1-n)+e*n}}tv(function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,l=r<e-1?t[r+2]:2*a-i;return tg((n-r/e)*e,o,i,a,l)}}),tv(function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],l=t[(r+2)%e];return tg((n-r/e)*e,i,a,o,l)}});var tx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tw=RegExp(tx.source,"g");function t_(t,e){var n,r,i,a,o,l=tx.lastIndex=tw.lastIndex=0,s=-1,c=[],u=[];for(t+="",e+="";(i=tx.exec(t))&&(a=tw.exec(e));)(o=a.index)>l&&(o=e.slice(l,o),c[s]?c[s]+=o:c[++s]=o),(i=i[0])===(a=a[0])?c[s]?c[s]+=a:c[++s]=a:(c[++s]=null,u.push({i:s,x:tb(i,a)})),l=tw.lastIndex;return l<e.length&&(o=e.slice(l),c[s]?c[s]+=o:c[++s]=o),c.length<2?u[0]?(n=u[0].x,function(t){return n(t)+""}):(r=e,function(){return r}):(e=u.length,function(t){for(var n,r=0;r<e;++r)c[(n=u[r]).i]=n.x(t);return c.join("")})}function tS(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var tM,tk,tO=0,tA=0,tE=0,tL=0,tN=0,tF=0,tj="object"==typeof performance&&performance.now?performance:Date,tD="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function tH(){return tN||(tD(tR),tN=tj.now()+tF)}function tR(){tN=0}function tT(){this._call=this._time=this._next=null}function t$(t,e,n){var r=new tT;return r.restart(t,e,n),r}function tI(){tN=(tL=tj.now())+tF,tO=tA=0;try{!function(){tH(),++tO;for(var t,e=tM;e;)(t=tN-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tO}()}finally{tO=0,function(){for(var t,e,n=tM,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:tM=e);tk=t,tC(r)}(),tN=0}}function tP(){var t=tj.now(),e=t-tL;e>1e3&&(tF-=e,tL=t)}function tC(t){!tO&&(tA&&(tA=clearTimeout(tA)),t-tN>24?(t<1/0&&(tA=setTimeout(tI,t-tj.now()-tF)),tE&&(tE=clearInterval(tE))):(tE||(tL=tj.now(),tE=setInterval(tP,1e3)),tO=1,tD(tI)))}function tU(t,e,n){var r=new tT;return e=null==e?0:+e,r.restart(n=>{r.stop(),t(n+e)},e,n),r}tT.prototype=t$.prototype={constructor:tT,restart:function(t,e,n){if("function"!=typeof t)throw TypeError("callback is not a function");n=(null==n?tH():+n)+(null==e?0:+e),this._next||tk===this||(tk?tk._next=this:tM=this,tk=this),this._call=t,this._time=n,tC()},stop:function(){this._call&&(this._call=null,this._time=1/0,tC())}};var tB=v("start","end","cancel","interrupt"),tq=[];function tV(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(s){var c,u,h,f;if(1!==n.state)return l();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return tU(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(tU(function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(s))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(c=0,n.state=3,r=Array(h=n.tween.length),u=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=t$(function(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:tB,tween:tq,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function tY(t,e){var n=tz(t,e);if(n.state>0)throw Error("too late; already scheduled");return n}function tX(t,e){var n=tz(t,e);if(n.state>3)throw Error("too late; already running");return n}function tz(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw Error("transition not found");return n}var tG=180/Math.PI,tK={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tW(t,e,n,r,i,a){var o,l,s;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),t*r<e*n&&(t=-t,e=-e,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*tG,skewX:Math.atan(s)*tG,scaleX:o,scaleY:l}}function tQ(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var l,s,c,u,h=[],f=[];return a=t(a),o=t(o),!function(t,r,i,a,o,l){if(t!==i||r!==a){var s=o.push("translate(",null,e,null,n);l.push({i:s-4,x:tb(t,i)},{i:s-2,x:tb(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,h,f),l=a.rotate,l!==(s=o.rotate)?(l-s>180?s+=360:s-l>180&&(l+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:tb(l,s)})):s&&h.push(i(h)+"rotate("+s+r),c=a.skewX,c!==(u=o.skewX)?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:tb(c,u)}):u&&h.push(i(h)+"skewX("+u+r),!function(t,e,n,r,a,o){if(t!==n||e!==r){var l=a.push(i(a)+"scale(",null,",",null,")");o.push({i:l-4,x:tb(t,n)},{i:l-2,x:tb(e,r)})}else(1!==n||1!==r)&&a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,h,f),a=o=null,function(t){for(var e,n=-1,r=f.length;++n<r;)h[(e=f[n]).i]=e.x(t);return h.join("")}}}var tZ=tQ(function(t){let e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?tK:tW(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),tJ=tQ(function(t){return null==t?tK:(n||(n=document.createElementNS("http://www.w3.org/2000/svg","g")),n.setAttribute("transform",t),t=n.transform.baseVal.consolidate())?tW((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):tK},", ",")",")");function t0(t,e,n){var r=t._id;return t.each(function(){var t=tX(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return tz(t,r).value[e]}}var td=u("bYoiY");function t1(t,e){var n;return("number"==typeof e?tb:e instanceof(0,td.default)?tm:(n=(0,td.default)(e))?(e=n,tm):t_)(t,e)}var t2=tl.prototype.constructor;function t5(t){return function(){this.style.removeProperty(t)}}var t3=0;function t8(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}var t4=tl.prototype;t8.prototype=(function(t){return tl().transition(t)}).prototype={constructor:t8,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=_(t));for(var r=this._groups,i=r.length,a=Array(i),o=0;o<i;++o)for(var l,s,c=r[o],u=c.length,h=a[o]=Array(u),f=0;f<u;++f)(l=c[f])&&(s=t.call(l,l.__data__,f,c))&&("__data__"in l&&(s.__data__=l.__data__),h[f]=s,tV(h[f],e,n,f,h,tz(l,n)));return new t8(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=M(t));for(var r=this._groups,i=r.length,a=[],o=[],l=0;l<i;++l)for(var s,c=r[l],u=c.length,h=0;h<u;++h)if(s=c[h]){for(var f,d=t.call(s,s.__data__,h,c),g=tz(s,n),p=0,y=d.length;p<y;++p)(f=d[p])&&tV(f,e,n,p,d,g);a.push(d),o.push(s)}return new t8(a,o,e,n)},selectChild:t4.selectChild,selectChildren:t4.selectChildren,filter:function(t){"function"!=typeof t&&(t=k(t));for(var e=this._groups,n=e.length,r=Array(n),i=0;i<n;++i)for(var a,o=e[i],l=o.length,s=r[i]=[],c=0;c<l;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&s.push(a);return new t8(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw Error();for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=Array(r),l=0;l<a;++l)for(var s,c=e[l],u=n[l],h=c.length,f=o[l]=Array(h),d=0;d<h;++d)(s=c[d]||u[d])&&(f[d]=s);for(;l<r;++l)o[l]=e[l];return new t8(o,this._parents,this._name,this._id)},selection:function(){return new t2(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++t3,r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],s=l.length,c=0;c<s;++c)if(o=l[c]){var u=tz(o,e);tV(o,t,n,c,l,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new t8(r,this._parents,t,n)},call:t4.call,nodes:t4.nodes,node:t4.node,size:t4.size,empty:t4.empty,each:t4.each,on:function(t,e){var n,r,i,a,o,l,s=this._id;return arguments.length<2?tz(this.node(),s).on.on(t):this.each((n=s,r=t,i=e,l=(r+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})?tY:tX,function(){var t=l(this,n),e=t.on;e!==a&&(o=(a=e).copy()).on(r,i),t.on=o}))},attr:function(t,e){var n=P(t),r="transform"===n?tJ:t1;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var r,i,a;return function(){var o,l,s=n(this);return null==s?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local))===(l=s+"")?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}:function(t,e,n){var r,i,a;return function(){var o,l,s=n(this);return null==s?void this.removeAttribute(t):(o=this.getAttribute(t))===(l=s+"")?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}})(n,r,t0(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}:function(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw Error();var r=P(t);return this.tween(n,(r.local?function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e){this.setAttributeNS(t.space,t.local,i.call(this,e))}),n}return i._value=e,i}:function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e){this.setAttribute(t,i.call(this,e))}),n}return i._value=e,i})(r,e))},style:function(t,e,n){var r,i,a,o,l,s,c,u,h,f,d,g,p,y,m,v,b,x,w,_,S,M="transform"==(t+="")?tZ:t1;return null==e?this.styleTween(t,(r=t,function(){var t=U(this,r),e=(this.style.removeProperty(r),U(this,r));return t===e?null:t===i&&e===a?o:o=M(i=t,a=e)})).on("end.style."+t,t5(t)):"function"==typeof e?this.styleTween(t,(l=t,s=t0(this,"style."+t,e),function(){var t=U(this,l),e=s(this),n=e+"";return null==e&&(this.style.removeProperty(l),n=e=U(this,l)),t===n?null:t===c&&n===u?h:(u=n,h=M(c=t,e))})).each((f=this._id,b="end."+(v="style."+(d=t)),function(){var t=tX(this,f),e=t.on,n=null==t.value[v]?m||(m=t5(d)):void 0;(e!==g||y!==n)&&(p=(g=e).copy()).on(b,y=n),t.on=p})):this.styleTween(t,(x=t,S=e+"",function(){var t=U(this,x);return t===S?null:t===w?_:_=M(w=t,e)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw Error();return this.tween(r,function(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(e){this.style.setProperty(t,a.call(this,e),n)}),r}return a._value=e,a}(t,e,null==n?"":n))},text:function(t){var e,n;return this.tween("text","function"==typeof t?(e=t0(this,"text",t),function(){var t=e(this);this.textContent=null==t?"":t}):(n=null==t?"":t+"",function(){this.textContent=n}))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw Error();return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){this.textContent=r.call(this,t)}),e}return r._value=t,r}(t))},remove:function(){var t;return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=tz(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var i=tX(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}}i.tween=r}}:function(t,e,n){var r,i;if("function"!=typeof n)throw Error();return function(){var a=tX(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===e){i[s]=l;break}s===c&&i.push(l)}a.tween=i}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){tY(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e*=1,function(){tY(this,t).delay=e}})(e,t)):tz(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){tX(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e*=1,function(){tX(this,t).duration=e}})(e,t)):tz(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw Error();return function(){tX(this,t).ease=e}}(e,t)):tz(this.node(),e).ease},easeVarying:function(t){var e;if("function"!=typeof t)throw Error();return this.each((e=this._id,function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw Error();tX(this,e).ease=n}))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var l={value:o},s={value:function(){0==--i&&a()}};n.each(function(){var n=tX(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(s)),n.on=e}),0===i&&a()})},[Symbol.iterator]:t4[Symbol.iterator]};var t6={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};tl.prototype.interrupt=function(t){return this.each(function(){!function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a){if((n=a[i]).name!==e){o=!1;continue}r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]}o&&delete t.__transition}}(this,t)})},tl.prototype.transition=function(t){var e,n;t instanceof t8?(e=t._id,t=t._name):(e=++t3,(n=t6).time=tH(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],s=l.length,c=0;c<s;++c)(o=l[c])&&tV(o,t,e,c,l,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw Error(`transition ${e} not found`);return n}(o,e));return new t8(r,this._parents,t,e)};const{abs:t9,max:t7,min:et}=Math;function ee(t){return{type:t}}["w","e"].map(ee),["n","s"].map(ee),["n","w","e","s","nw","ne","sw","se"].map(ee);var en=t=>()=>t;function er(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:o,y:l,dx:s,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function ei(t){return!t.ctrlKey&&!t.button}function ea(){return this.parentNode}function eo(t,e){return null==e?{x:t.x,y:t.y}:e}function el(){return navigator.maxTouchPoints||"ontouchstart"in this}function es(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,l,s,c,u,h,f,d=t._root,g={data:r},p=t._x0,y=t._y0,m=t._x1,v=t._y1;if(!d)return t._root=g,t;for(;d.length;)if((c=e>=(a=(p+m)/2))?p=a:m=a,(u=n>=(o=(y+v)/2))?y=o:v=o,i=d,!(d=d[h=u<<1|c]))return i[h]=g,t;if(l=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===l&&n===s)return g.next=d,i?i[h]=g:t._root=g,t;do i=i?i[h]=[,,,,]:t._root=[,,,,],(c=e>=(a=(p+m)/2))?p=a:m=a,(u=n>=(o=(y+v)/2))?y=o:v=o;while((h=u<<1|c)==(f=(s>=o)<<1|l>=a))return i[f]=d,i[h]=g,t}function ec(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function eu(t){return t[0]}function eh(t){return t[1]}function ef(t,e,n){var r=new ed(null==e?eu:e,null==n?eh:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function ed(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function eg(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}er.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var ep=ef.prototype=ed.prototype;function ey(t){return function(){return t}}function em(t){return(t()-.5)*1e-6}function ev(t){return t.x+t.vx}function eb(t){return t.y+t.vy}function ex(t){return t.x}function ew(t){return t.y}ep.copy=function(){var t,e,n=new ed(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=eg(r),n;for(t=[{source:r,target:n._root=[,,,,]}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=[,,,,]}):r.target[i]=eg(e));return n},ep.add=function(t){let e=+this._x.call(null,t),n=+this._y.call(null,t);return es(this.cover(e,n),e,n,t)},ep.addAll=function(t){var e,n,r,i,a=t.length,o=Array(a),l=Array(a),s=1/0,c=1/0,u=-1/0,h=-1/0;for(n=0;n<a;++n)!(isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e)))&&(o[n]=r,l[n]=i,r<s&&(s=r),r>u&&(u=r),i<c&&(c=i),i>h&&(h=i));if(s>u||c>h)return this;for(this.cover(s,c).cover(u,h),n=0;n<a;++n)es(this,o[n],l[n],t[n]);return this},ep.cover=function(t,e){if(isNaN(t*=1)||isNaN(e*=1))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,l,s=i-n||1,c=this._root;n>t||t>=i||r>e||e>=a;)switch(l=(e<r)<<1|t<n,(o=[,,,,])[l]=c,c=o,s*=2,l){case 0:i=n+s,a=r+s;break;case 1:n=i-s,a=r+s;break;case 2:i=n+s,r=a-s;break;case 3:n=i-s,r=a-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},ep.data=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},ep.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ep.find=function(t,e,n){var r,i,a,o,l,s,c,u=this._x0,h=this._y0,f=this._x1,d=this._y1,g=[],p=this._root;for(p&&g.push(new ec(p,u,h,f,d)),null==n?n=1/0:(u=t-n,h=e-n,f=t+n,d=e+n,n*=n);s=g.pop();)if((p=s.node)&&!((i=s.x0)>f)&&!((a=s.y0)>d)&&!((o=s.x1)<u)&&!((l=s.y1)<h)){if(p.length){var y=(i+o)/2,m=(a+l)/2;g.push(new ec(p[3],y,m,o,l),new ec(p[2],i,m,y,l),new ec(p[1],y,a,o,m),new ec(p[0],i,a,y,m)),(c=(e>=m)<<1|t>=y)&&(s=g[g.length-1],g[g.length-1]=g[g.length-1-c],g[g.length-1-c]=s)}else{var v=t-+this._x.call(null,p.data),b=e-+this._y.call(null,p.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);u=t-w,h=e-w,f=t+w,d=e+w,r=p.data}}}return r},ep.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,l,s,c,u,h,f,d=this._root,g=this._x0,p=this._y0,y=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((c=a>=(l=(g+y)/2))?g=l:y=l,(u=o>=(s=(p+m)/2))?p=s:m=s,e=d,!(d=d[h=u<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return((i=d.next)&&delete d.next,r)?i?r.next=i:delete r.next:e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d)):this._root=i,this},ep.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},ep.root=function(){return this._root},ep.size=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},ep.visit=function(t){var e,n,r,i,a,o,l=[],s=this._root;for(s&&l.push(new ec(s,this._x0,this._y0,this._x1,this._y1));e=l.pop();)if(!t(s=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&s.length){var c=(r+a)/2,u=(i+o)/2;(n=s[3])&&l.push(new ec(n,c,u,a,o)),(n=s[2])&&l.push(new ec(n,r,u,c,o)),(n=s[1])&&l.push(new ec(n,c,i,a,u)),(n=s[0])&&l.push(new ec(n,r,i,c,u))}return this},ep.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new ec(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,l=e.y0,s=e.x1,c=e.y1,u=(o+s)/2,h=(l+c)/2;(a=i[0])&&n.push(new ec(a,o,l,u,h)),(a=i[1])&&n.push(new ec(a,u,l,s,h)),(a=i[2])&&n.push(new ec(a,o,h,u,c)),(a=i[3])&&n.push(new ec(a,u,h,s,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},ep.x=function(t){return arguments.length?(this._x=t,this):this._x},ep.y=function(t){return arguments.length?(this._y=t,this):this._y};var e_=Math.PI*(3-Math.sqrt(5));function eS(t){let e;var n,r=1,i=.001,a=1-Math.pow(.001,1/300),o=0,l=.6,s=new Map,c=t$(f),u=v("tick","end"),h=(e=1,()=>(e=(1664525*e+0x3c6ef35f)%0x100000000)/0x100000000);function f(){d(),u.call("tick",n),r<i&&(c.stop(),u.call("end",n))}function d(e){var i,c,u=t.length;void 0===e&&(e=1);for(var h=0;h<e;++h)for(r+=(o-r)*a,s.forEach(function(t){t(r)}),i=0;i<u;++i)null==(c=t[i]).fx?c.x+=c.vx*=l:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=l:(c.y=c.fy,c.vy=0);return n}function g(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),a=n*e_;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,h),e}return null==t&&(t=[]),g(),n={tick:d,restart:function(){return c.restart(f),n},stop:function(){return c.stop(),n},nodes:function(e){return arguments.length?(t=e,g(),s.forEach(p),n):t},alpha:function(t){return arguments.length?(r=+t,n):r},alphaMin:function(t){return arguments.length?(i=+t,n):i},alphaDecay:function(t){return arguments.length?(a=+t,n):+a},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(l=1-t,n):1-l},randomSource:function(t){return arguments.length?(h=t,s.forEach(p),n):h},force:function(t,e){return arguments.length>1?(null==e?s.delete(t):s.set(t,p(e)),n):s.get(t)},find:function(e,n,r){var i,a,o,l,s,c=0,u=t.length;for(null==r?r=1/0:r*=r,c=0;c<u;++c)(o=(i=e-(l=t[c]).x)*i+(a=n-l.y)*a)<r&&(s=l,r=o);return s},on:function(t,e){return arguments.length>1?(u.on(t,e),n):u.on(t)}}}const eM=Math.sqrt(50),ek=Math.sqrt(10),eO=Math.sqrt(2);function eA(t,e,n){let r,i,a;let o=(e-t)/Math.max(0,n),l=Math.floor(Math.log10(o)),s=o/Math.pow(10,l),c=s>=eM?10:s>=ek?5:s>=eO?2:1;return(l<0?(r=Math.round(t*(a=Math.pow(10,-l)/c)),i=Math.round(e*a),r/a<t&&++r,i/a>e&&--i,a=-a):(r=Math.round(t/(a=Math.pow(10,l)*c)),i=Math.round(e/a),r*a<t&&++r,i*a>e&&--i),i<r&&.5<=n&&n<2)?eA(t,e,2*n):[r,i,a]}function eE(t,e,n){return eA(t*=1,e*=1,n*=1)[2]}function eL(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function eN(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function eF(t){let e,n,r;function i(t,r,a=0,o=t.length){if(a<o){if(0!==e(r,r))return o;do{let e=a+o>>>1;0>n(t[e],r)?a=e+1:o=e}while(a<o)}return a}return 2!==t.length?(e=eL,n=(e,n)=>eL(t(e),n),r=(e,n)=>t(e)-n):(e=t===eL||t===eN?t:ej,n=t,r=t),{left:i,center:function(t,e,n=0,a=t.length){let o=i(t,e,n,a-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{let e=i+a>>>1;0>=n(t[e],r)?i=e+1:a=e}while(i<a)}return i}}}function ej(){return 0}const eD=eF(eL),eH=eD.right;function eR(t,e){return t*=1,e*=1,function(n){return Math.round(t*(1-n)+e*n)}}function eT(t){return+t}eD.left,eF(function(t){return null===t?NaN:+t}).center;var e$=[0,1];function eI(t){return t}function eP(t,e){var n;return(e-=t*=1)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n})}function eC(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=eP(i,r),a=n(o,a)):(r=eP(r,i),a=n(a,o)),function(t){return a(r(t))}}function eU(t,e,n){var r=Math.min(t.length,e.length)-1,i=Array(r),a=Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=eP(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=eH(t,e,1,r)-1;return a[n](i[n](e))}}function eB(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function eq(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function eV(t){return(t=eq(Math.abs(t)))?t[1]:NaN}var eY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function eX(t){var e;if(!(e=eY.exec(t)))throw Error("invalid format: "+t);return new ez({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ez(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function eG(t,e){var n=eq(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+Array(i-r.length+2).join("0")}eX.prototype=ez.prototype,ez.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var eK={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>eG(100*t,e),r:eG,s:function(t,e){var n=eq(t,e);if(!n)return t+"";var i=n[0],a=n[1],o=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,l=i.length;return o===l?i:o>l?i+Array(o-l+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+Array(1-o).join("0")+eq(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function eW(t){return t}var eQ=Array.prototype.map,eZ=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function eJ(){var t,e=(function(){var t,e,n,r,i,a,o=e$,l=e$,s=function t(e,n){var r,i,a=typeof n;return null==n||"boolean"===a?tp(n):("number"===a?tb:"string"===a?(i=(0,td.default)(n))?(n=i,tm):t_:n instanceof(0,td.default)?tm:n instanceof Date?function(t,e){var n=new Date;return t*=1,e*=1,function(r){return n.setTime(t*(1-r)+e*r),n}}:!ArrayBuffer.isView(r=n)||r instanceof DataView?Array.isArray(n)?function(e,n){var r,i=n?n.length:0,a=e?Math.min(i,e.length):0,o=Array(a),l=Array(i);for(r=0;r<a;++r)o[r]=t(e[r],n[r]);for(;r<i;++r)l[r]=n[r];return function(t){for(r=0;r<a;++r)l[r]=o[r](t);return l}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(e,n){var r,i={},a={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===n||"object"!=typeof n)&&(n={}),n)r in e?i[r]=t(e[r],n[r]):a[r]=n[r];return function(t){for(r in i)a[r]=i[r](t);return a}}:tb:function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}})(e,n)},c=eI;function u(){var t,e,n,s=Math.min(o.length,l.length);return c!==eI&&(t=o[0],e=o[s-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=s>2?eU:eC,i=a=null,h}function h(e){return null==e||isNaN(e*=1)?n:(i||(i=r(o.map(t),l,s)))(t(c(e)))}return h.invert=function(n){return c(e((a||(a=r(l,o.map(t),tb)))(n)))},h.domain=function(t){return arguments.length?(o=Array.from(t,eT),u()):o.slice()},h.range=function(t){return arguments.length?(l=Array.from(t),u()):l.slice()},h.rangeRound=function(t){return l=Array.from(t),s=eR,u()},h.clamp=function(t){return arguments.length?(c=!!t||eI,u()):c!==eI},h.interpolate=function(t){return arguments.length?(s=t,u()):s},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}})()(eI,eI);return e.copy=function(){return eJ().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())},eB.apply(e,arguments),t=e.domain,e.ticks=function(e){var n=t();return function(t,e,n){if(e*=1,t*=1,!((n*=1)>0))return[];if(t===e)return[t];let r=e<t,[i,a,o]=r?eA(e,t,n):eA(t,e,n);if(!(a>=i))return[];let l=a-i+1,s=Array(l);if(r){if(o<0)for(let t=0;t<l;++t)s[t]=-((a-t)/o);else for(let t=0;t<l;++t)s[t]=(a-t)*o}else if(o<0)for(let t=0;t<l;++t)s[t]=-((i+t)/o);else for(let t=0;t<l;++t)s[t]=(i+t)*o;return s}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return function(t,e,n,r){var i,l,s,c=function(t,e,n){e*=1,t*=1,n*=1;let r=e<t,i=r?eE(e,t,n):eE(t,e,n);return(r?-1:1)*(i<0?-(1/i):i)}(t,e,n);switch((r=eX(null==r?",f":r)).type){case"s":var u=Math.max(Math.abs(t),Math.abs(e));return null==r.precision&&!isNaN(s=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(eV(u)/3)))-eV(Math.abs(c))))&&(r.precision=s),o(r,u);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(s=Math.max(0,eV(Math.abs(Math.max(Math.abs(t),Math.abs(e)))-(i=Math.abs(i=c)))-eV(i))+1)&&(r.precision=s-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(s=Math.max(0,-eV(Math.abs(c))))&&(r.precision=s-("%"===r.type)*2)}return a(r)}(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),o=0,l=a.length-1,s=a[o],c=a[l],u=10;for(c<s&&(i=s,s=c,c=i,i=o,o=l,l=i);u-- >0;){if((i=eE(s,c,n))===r)return a[o]=s,a[l]=c,t(a);if(i>0)s=Math.floor(s/i)*i,c=Math.ceil(c/i)*i;else if(i<0)s=Math.ceil(s*i)/i,c=Math.floor(c*i)/i;else break;r=i}return e},e}function e0(t){return((t=Math.exp(t))+1/t)/2}function e1(t,e,n){this.k=t,this.x=e,this.y=n}a=(i=function(t){var e,n,i,a=void 0===t.grouping||void 0===t.thousands?eW:(e=eQ.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,l=e[0],s=0;i>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),a.push(t.substring(i-=l,i+l)),!((s+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(n)}),o=void 0===t.currency?"":t.currency[0]+"",l=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",c=void 0===t.numerals?eW:(i=eQ.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return i[+t]})}),u=void 0===t.percent?"%":t.percent+"",h=void 0===t.minus?"−":t.minus+"",f=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=eX(t)).fill,n=t.align,i=t.sign,d=t.symbol,g=t.zero,p=t.width,y=t.comma,m=t.precision,v=t.trim,b=t.type;"n"===b?(y=!0,b="g"):eK[b]||(void 0===m&&(m=12),v=!0,b="g"),(g||"0"===e&&"="===n)&&(g=!0,e="0",n="=");var x="$"===d?o:"#"===d&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",w="$"===d?l:/[%p]/.test(b)?u:"",_=eK[b],S=/[defgprs%]/.test(b);function M(t){var o,l,u,d=x,M=w;if("c"===b)M=_(t)+M,t="";else{var k=(t*=1)<0||1/t<0;if(t=isNaN(t)?f:_(Math.abs(t),m),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==i&&(k=!1),d=(k?"("===i?i:h:"-"===i||"("===i?"":i)+d,M=("s"===b?eZ[8+r/3]:"")+M+(k&&"("===i?")":""),S){for(o=-1,l=t.length;++o<l;)if(48>(u=t.charCodeAt(o))||u>57){M=(46===u?s+t.slice(o+1):t.slice(o))+M,t=t.slice(0,o);break}}}y&&!g&&(t=a(t,1/0));var O=d.length+t.length+M.length,A=O<p?Array(p-O+1).join(e):"";switch(y&&g&&(t=a(A+t,A.length?p-M.length:1/0),A=""),n){case"<":t=d+t+M+A;break;case"=":t=d+A+t+M;break;case"^":t=A.slice(0,O=A.length>>1)+d+t+M+A.slice(O);break;default:t=A+d+t+M}return c(t)}return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),M.toString=function(){return t+""},M}return{format:d,formatPrefix:function(t,e){var n=d(((t=eX(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(eV(e)/3))),i=Math.pow(10,-r),a=eZ[8+r/3];return function(t){return n(i*t)+a}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,o=i.formatPrefix,!function t(e,n,r){function i(t,i){var a,o,l=t[0],s=t[1],c=t[2],u=i[0],h=i[1],f=i[2],d=u-l,g=h-s,p=d*d+g*g;if(p<1e-12)o=Math.log(f/c)/e,a=function(t){return[l+t*d,s+t*g,c*Math.exp(e*t*o)]};else{var y=Math.sqrt(p),m=(f*f-c*c+r*p)/(2*c*n*y),v=(f*f-c*c-r*p)/(2*f*n*y),b=Math.log(Math.sqrt(m*m+1)-m);o=(Math.log(Math.sqrt(v*v+1)-v)-b)/e,a=function(t){var r,i,a=t*o,u=e0(b),h=c/(n*y)*(u*(((r=Math.exp(2*(r=e*a+b)))-1)/(r+1))-((i=Math.exp(i=b))-1/i)/2);return[l+h*d,s+h*g,c*u/e0(e*a+b)]}}return a.duration=1e3*o*e/Math.SQRT2,a}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4),e1.prototype={constructor:e1,scale:function(t){return 1===t?this:new e1(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new e1(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var e2=new e1(1,0,0);e1.prototype;const e5=[],e3=[{name:"Navigation",nodes:[{id:"Navigation",representation:"map",x:-50,y:100,color:"blue",radius:9,isFixed:!1,significance:100,hotspots:[{x:0,y:6,intensityFactor:1,width:30,height:30,forceType:"attract"},{x:15,y:-18,intensityFactor:1,width:20,height:25,forceType:"attract"},{x:27,y:12,intensityFactor:1,width:30,height:12,forceType:"attract"},{x:-8,y:78,intensityFactor:1,width:10,height:20,forceType:"attract"}]}]},{name:"Speed",nodes:[{id:"Speed",representation:"number",x:-50,y:100,color:"green",radius:8,isFixed:!1,significance:100,hotspots:[{x:6,y:12,intensityFactor:1,width:15,height:30,forceType:"attract"},{x:15,y:-40,intensityFactor:1,width:5,height:15,forceType:"attract"},{x:55,y:12,intensityFactor:1,width:12,height:8,forceType:"attract"},{x:-30,y:70,intensityFactor:1,width:15,height:23,forceType:"attract"}]}]},{name:"Power",nodes:[{id:"Power",representation:"radial",x:-50,y:100,color:"red",radius:6,isFixed:!1,significance:100,hotspots:[{x:-78,y:78,intensityFactor:1,width:20,height:20,forceType:"attract"},{x:0,y:75,intensityFactor:1,width:20,height:20,forceType:"attract"},{x:-12,y:35,intensityFactor:1,width:20,height:20,forceType:"attract"},{x:-50,y:25,intensityFactor:1,width:20,height:20,forceType:"attract"}]}]},{name:"Heartrate",nodes:[{id:"Heartrate",representation:"symbol",x:-70,y:-80,color:"purple",radius:7,isFixed:!1,significance:100,hotspots:[{x:-60,y:-30,intensityFactor:1,width:20,height:20,forceType:"attract"},{x:40,y:-30,intensityFactor:1,width:20,height:20,forceType:"attract"},{x:-48,y:-60,intensityFactor:1,width:20,height:20,forceType:"attract"},{x:28,y:-60,intensityFactor:1,width:20,height:20,forceType:"attract"},{x:-10,y:-80,intensityFactor:1,width:20,height:20,forceType:"attract"}]}]}];function e8(t){return function(e){e5.forEach(n=>{n.forces=[],n.hotspots.forEach(r=>{let i=r.x-n.x,a=r.y-n.y,o=Math.sqrt(i*i+a*a);if(o>1){let l=Math.exp(-o/r.width)*t*r.intensityFactor,s="attract"===r.forceType?i*l:-i*l,c="attract"===r.forceType?a*l:-a*l;n.vx+=s*e,n.vy+=c*e,n.forces.push({fx:s,fy:c,source:"hotspot"})}}),e5.forEach(t=>{if(n===t)return;let r=t.x-n.x,i=t.y-n.y,a=Math.sqrt(r*r+i*i),o=n.radius+t.radius+10;if(a<o){let l=r/a*(o-a),s=i/a*(o-a);n.vx-=l*e*.5,n.vy-=s*e*.5,n.forces.push({fx:-l,fy:-s,source:`collision with ${t.id}`})}})})}}function e4(t){e5.forEach((e,n)=>{e5.forEach((r,i)=>{if(n===i)return;let a=e.x-r.x,o=e.y-r.y,l=Math.sqrt(a*a+o*o),s=e.radius+r.radius+10;if(l<s&&l>0){let n=(1-l/s)**2*t*5,i=a/l*n,c=o/l*n;if(e.isFixed||r.isFixed)e.isFixed?r.isFixed||(r.vx-=i,r.vy-=c):(e.vx+=i,e.vy+=c);else{let t=e.significance||1,n=r.significance||1,a=t+n,o=n/a,l=t/a;e.vx+=i*o,e.vy+=c*o,r.vx-=i*l,r.vy-=c*l}e.forces.push({fx:-i,fy:-c,source:`collision with ${r.id}`})}})})}let e6={keyboardShortcut:"Digit1",keyboardShortcutLetter:"1",shownInViewPanel:!0,defaultState:!1,boolState:!0,UILabelString:"Name",shorthandString:"ID labels",ToggleObjectString:"toggleNodeLabel",DOMObjectString:"id-label",URLParamString:"nodeLabel"},e9={keyboardShortcut:"Digit2",keyboardShortcutLetter:"2",shownInViewPanel:!0,defaultState:!1,boolState:!0,UILabelString:"Coordinates",shorthandString:"coordinate labels",ToggleObjectString:"toggleCoordinates",DOMObjectString:"coord-label",URLParamString:"coords"},e7={keyboardShortcut:"Digit3",keyboardShortcutLetter:"3",shownInViewPanel:!0,defaultState:!1,boolState:!0,UILabelString:"Force Arrows",shorthandString:"arrows of forces",ToggleObjectString:"toggleForceArrows",DOMObjectString:"force-arrows",DOMObjectSingleString:"force-arrow",URLParamString:"forceArrows"},nt={keyboardShortcut:"KeyE",keyboardShortcutLetter:"E",shownInViewPanel:!0,defaultState:!1,boolState:!0,UILabelString:"Force Label",shorthandString:"labels for arrows of forces",ToggleObjectString:"toggleForceArrowsLabels",DOMObjectString:"force-arrows-labels",DOMObjectSingleString:"force-arrow-labels",URLParamString:"forceArrowsLabels"},ne={keyboardShortcut:"Digit4",keyboardShortcutLetter:"4",shownInViewPanel:!0,defaultState:!1,boolState:!0,UILabelString:"Observations",shorthandString:"observations",ToggleObjectString:"toggleObservations",DOMObjectString:"hotspot-group",URLParamString:"obs"},nn={keyboardShortcut:"Digit5",keyboardShortcutLetter:"5",shownInViewPanel:!0,defaultState:!1,boolState:!0,UILabelString:"Breadcrumbs",shorthandString:"dotted lines to observations",ToggleObjectString:"toggleNodeLines",DOMObjectString:"node-relations",DOMObjectSingleString:"node-relation",URLParamString:"obsLines"},nr={keyboardShortcut:"Digit6",keyboardShortcutLetter:"6",shownInViewPanel:!0,defaultState:!0,boolState:!1,UILabelString:"Background",shorthandString:"background",ToggleObjectString:"toggleBackground",DOMObjectString:"background-layer",URLParamString:"bg"},ni={keyboardShortcut:"Digit7",keyboardShortcutLetter:"7",shownInViewPanel:!0,defaultState:!1,boolState:!0,UILabelString:"Stress Heatmap",shorthandString:"stress heatmap",ToggleObjectString:"stressHeatmap",DOMObjectString:"wind-layer-stress",URLParamString:"stressHeatmap"},na={keyboardShortcut:"KeyB",keyboardShortcutLetter:"B",shownInViewPanel:!1,defaultState:!0,boolState:!0,UILabelString:"Stress Heatmap Label",shorthandString:"stress heatmap label",ToggleObjectString:"stressHeatmapLabel",DOMObjectString:"wind-layer-stress-label",URLParamString:"stressHeatmapLabel"},no={keyboardShortcut:"KeyC",keyboardShortcutLetter:"C",shownInViewPanel:!1,defaultState:!1,boolState:!1,UILabelString:"Wind Cancel",shorthandString:"wind cancel",ToggleObjectString:"windCancel",DOMObjectString:"wind-layer-cancel",URLParamString:"windCancel"},nl={keyboardShortcut:"KeyG",keyboardShortcutLetter:"G",shownInViewPanel:!1,defaultState:!1,boolState:!1,UILabelString:"Wind Cancel Label",shorthandString:"wind cancel label",ToggleObjectString:"windCancelLabel",DOMObjectString:"wind-layer-cancel-label",URLParamString:"windCancelLabel"},ns={keyboardShortcut:"Digit8",keyboardShortcutLetter:"8",shownInViewPanel:!0,defaultState:!1,boolState:!0,UILabelString:"Wind Map",shorthandString:"wind net force",ToggleObjectString:"windNetForce",DOMObjectString:"wind-layer-netForceArrow",URLParamString:"windNetForce"},nc={keyboardShortcut:"Digit9",keyboardShortcutLetter:"9",shownInViewPanel:!0,defaultState:!0,boolState:!0,UILabelString:"Node Circles",shorthandString:"node circles",ToggleObjectString:"nodeCircles",DOMObjectString:"node-circle",URLParamString:"nodeCircles"},nu={keyboardShortcut:"KeyL",keyboardShortcutLetter:"L",shownInViewPanel:!0,defaultState:!1,boolState:!1,UILabelString:"Log",shorthandString:"terminal",ToggleObjectString:"toggleTerminal",DOMObjectString:"logContainer",URLParamString:"cmd"};const nh=new URLSearchParams(new URL(window.location.href).search),nf=[e6,e9,e7,nt,{keyboardShortcut:"KeyN",keyboardShortcutLetter:"N",shownInViewPanel:!1,defaultState:!0,boolState:!0,UILabelString:"Net Force",shorthandString:"net force arrows",ToggleObjectString:"toggleNetForce",DOMObjectString:"force-arrow-netForce",URLParamString:"netForceArrows"},ne,nn,nr,ni,na,no,nl,ns,nc,{keyboardShortcut:"KeyA",keyboardShortcutLetter:"A",shownInViewPanel:!0,defaultState:!1,boolState:!0,UILabelString:"Axis",shorthandString:"axis",ToggleObjectString:"toggleAxis",DOMObjectString:"axis",URLParamString:"axis"},{keyboardShortcut:"KeyS",keyboardShortcutLetter:"S",shownInViewPanel:!1,defaultState:!0,boolState:!0,UILabelString:"Simulation Panel",shorthandString:"simulation panel",ToggleObjectString:"toggleSimulationPanel",DOMObjectString:"simulation-panel",URLParamString:"simulationPanel"},{keyboardShortcut:"KeyV",keyboardShortcutLetter:"V",shownInViewPanel:!1,defaultState:!0,boolState:!0,UILabelString:"View Panel",shorthandString:"view panel",ToggleObjectString:"toggleViewPanel",DOMObjectString:"view-panel",URLParamString:"viewPanel"},{keyboardShortcut:"KeyM",keyboardShortcutLetter:"M",shownInViewPanel:!0,defaultState:!0,boolState:!0,UILabelString:"Metrics",shorthandString:"metrics",ToggleObjectString:"toggleMetrics",DOMObjectString:"metrics-panel",URLParamString:"metricsPanel"},nu];function nd(t,e,n,r,i){document.querySelectorAll(e).forEach(e=>{t?e.classList.remove("hidden"):e.classList.add("hidden")}),function(t,e,n){let r=new URL(window.location);e!=n?r.searchParams.set(t,e?"1":"0"):r.searchParams.delete(t),window.history.replaceState({},"",r)}(r,t,i),console.log((t?"show ":"hide ")+n,"yellow")}const ng=[{name:"backgroundBottomBase",width:180,height:90,x:-90,y:18,fileWidth:1173,fileHeight:341,align:"xMidYMax meet",url:u("hTyzv")},{name:"backgroundTopDownhill",width:180,height:90,x:-90,y:-44,fileWidth:1173,fileHeight:468,align:"xMidYMin meet",url:u("3Sg88")}];function np(t,e,n){t.selectAll("."+ne.DOMObjectString).data(e,t=>t.id).join("g").attr("class",ne.boolState?ne.DOMObjectString:ne.DOMObjectString+" hidden").attr("id",t=>ne.boolState?ne.DOMObjectString+"-"+t.id:ne.DOMObjectString+"-"+t.id+" hidden").attr("opacity",.3).selectAll(".hotspot").data(t=>t.hotspots).join(t=>{let e=t.append("rect").attr("class","hotspot");return e.each(function(t){ts(this.parentNode).datum()}),e},t=>t,t=>t.remove()).attr("x",t=>t.x-t.width/2).attr("y",t=>t.y-t.height/2).attr("width",t=>t.width).attr("height",t=>t.height).each(function(t){t.nodeId=ts(this.parentNode).datum().id,t.color=ts(this.parentNode).datum().color}).attr("fill",t=>ny(n,t.color)).style("stroke",t=>t.color).style("stroke-width",2)}function ny(t,e){let n=`forceGradient-${e.replace("#","")}`;if(t.select(`#${n}`).empty()){let r=t.append("radialGradient").attr("id",n).attr("cx","50%").attr("cy","50%").attr("r","50%");r.append("stop").attr("offset","0%").style("stop-color",e).style("stop-opacity",.4),r.append("stop").attr("offset","100%").style("stop-color",e).style("stop-opacity",.1)}return`url(#${n})`}const nm=[{key:"01",url:u("8XzkL")},{key:"02",url:u("k6sew")},{key:"03",url:u("CDwt9")},{key:"04",url:u("dGUO7")},{key:"count",url:u("kY81L")},{key:"fill",url:u("dayu4")},{key:"graph",url:u("gN9fG")},{key:"linear1",url:u("85GN7")},{key:"linear2",url:u("iF2ue")},{key:"map",url:u("8wXJJ")},{key:"navigation",url:u("5HHoh")},{key:"number",url:u("gEANH")},{key:"radial",url:u("oTQjj")},{key:"sound",url:u("asQUY")},{key:"symbol",url:u("2ywuS")},{key:"text",url:u("6ZUZW")}],nv=Object.fromEntries(nm.map(t=>[t.key,t.url])),nb=document.createElement("div");nb.id="logContainer",nb.classList=nu.boolState?"logContainer":"logContainer hidden",document.body.appendChild(nb),!function(){let t=console.log;console.log=function(e,n){!function(t,e="white"){let n=document.createElement("div");n.textContent=`[${new Date().toLocaleTimeString()}] ${t}`,n.style.color=e,nb.prepend(n),n.style.opacity="1",n.style.transition="opacity 1s",setTimeout(()=>{n.style.opacity="0.3"},4e3),setTimeout(()=>{n.remove()},5e4)}(e,n),t.apply(console,arguments)}}();const nx=["red","green","blue","orange","purple","magenta","darkblue","darkgreen","coral","salmon","slateblue","teal","olive","brown","darkorange"],{svg:nw,container:n_,nodeLayer:nS,hotspotLayer:nM,windLayerCancel:nk,windLayerStress:nO,windLayerNetForceArrows:nA,width:nE,height:nL,minDim:nN,scaleUnit:nF}=function(){let t=window.innerWidth,e=.95*t,n=window.visualViewport?window.visualViewport.height:window.innerHeight,r=.95*n,i=Math.min(e,r),a=i/180;window.visualViewport.height>window.innerHeight+2&&(console.log("user appears to be on mobile. good luck.","pink"),console.log("height: "+r,"pink"),console.log("window.visualViewport.height: "+window.visualViewport.height,"pink"),console.log("(window.innerHeight+2): "+(window.innerHeight+2),"pink"));let o=ts("body").append("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("width",e).attr("height",r),l=o.append("g").attr("class","container").attr("transform",`translate(${t/2},${n/2})`),s=l.append("g").attr("id","background-layer").attr("class",nr.boolState?nr.DOMObjectString+"":nr.DOMObjectString+" hidden");ng.forEach((t,e)=>{s.append("image").attr("href",t.url).attr("width",t.width*a).attr("height",t.height*a).attr("x",t.x*a).attr("y",t.y*a)});let c=l.append("g").attr("class","hotspot-layer").attr("id","hotspot-layer"),u=l.append("g").attr("class",no.DOMObjectString).attr("id",no.DOMObjectString).attr("style","transition: all ease-in-out 2s;"),h=l.append("g").attr("class",ni.DOMObjectString).attr("id",ni.DOMObjectString).attr("style","transition: all ease-in-out 2s;"),f=l.append("g").attr("class",ns.DOMObjectString).attr("id",ns.DOMObjectString).attr("style","transition: all ease-in-out 2s;"),d=l.append("g").attr("class","node-layer").attr("id","node-layer");return{svg:o,container:l,nodeLayer:d,hotspotLayer:c,windLayerCancel:u,windLayerStress:h,windLayerNetForceArrows:f,width:e,height:r,minDim:i,scaleUnit:a}}();console.log("scaleUnit "+nF,"lime"),ts("#metrics-panel tbody");const nj=ts("#metrics-panel").append("table").attr("class","metrics");nj.append("thead").append("tr").selectAll("th").data(["id","x","y","Σ|F|","|ΣF|","cancel","vx","vy"]).enter().append("th").text(t=>t);const nD=nj.append("tbody").attr("id","metrics-body"),nH=nj.append("tfoot"),{xScale:nR,yScale:nT,xAxis:n$,yAxis:nI}=function(t,e,n,r){let i=eJ().domain([-90,90]).range([r/2,-r/2]),a=eJ().domain([-90,90]).range([-r/2,r/2]),o=y(4,i).ticks(10),l=y(3,a).ticks(10),s=t.append("g").attr("class","axis");return s.append("g").attr("class","y-axis").call(o),s.append("g").attr("class","x-axis").call(l),{xScale:a,yScale:i,xAxis:l,yAxis:o}}(n_,0,0,nN),nP=nw.append("defs").attr("id","defs").attr("width",100).attr("height",100);function nC(e,n){return(t=e.selectAll(".node-group").data(n,t=>t.id).join(t=>{let e=t.append("g").attr("class","node-group").attr("id",t=>"node-group-"+t.id).on("dblclick",nW).call((function(){var t,e,n,r,i=ei,a=ea,o=eo,l=el,s={},c=v("start","drag","end"),u=0,h=0;function f(t){t.on("mousedown.drag",d).filter(l).on("touchstart.drag",y).on("touchmove.drag",m,tc).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(o,l){if(!r&&i.call(this,o,l)){var s,c,u,h=x(this,a.call(this,o,l),o,l,"mouse");h&&(ts(o.view).on("mousemove.drag",g,tu).on("mouseup.drag",p,tu),c=(s=o.view).document.documentElement,u=ts(s).on("dragstart.drag",tf,tu),"onselectstart"in c?u.on("selectstart.drag",tf,tu):(c.__noselect=c.style.MozUserSelect,c.style.MozUserSelect="none"),th(o),n=!1,t=o.clientX,e=o.clientY,h("start",o))}}function g(r){if(tf(r),!n){var i=r.clientX-t,a=r.clientY-e;n=i*i+a*a>h}s.mouse("drag",r)}function p(t){var e,r,i,a;ts(t.view).on("mousemove.drag mouseup.drag",null),e=t.view,r=n,i=e.document.documentElement,a=ts(e).on("dragstart.drag",null),r&&(a.on("click.drag",tf,tu),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in i?a.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect),tf(t),s.mouse("end",t)}function y(t,e){if(i.call(this,t,e)){var n,r,o=t.changedTouches,l=a.call(this,t,e),s=o.length;for(n=0;n<s;++n)(r=x(this,l,t,e,o[n].identifier,o[n]))&&(th(t),r("start",t,o[n]))}}function m(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=s[r[e].identifier])&&(tf(t),n("drag",t,r[e]))}function b(t){var e,n,i=t.changedTouches,a=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),e=0;e<a;++e)(n=s[i[e].identifier])&&(th(t),n("end",t,i[e]))}function x(t,e,n,r,i,a){var l,h,d,g=c.copy(),p=tS(a||n,e);if(null!=(d=o.call(t,new er("beforestart",{sourceEvent:n,target:f,identifier:i,active:u,x:p[0],y:p[1],dx:0,dy:0,dispatch:g}),r)))return l=d.x-p[0]||0,h=d.y-p[1]||0,function n(a,o,c){var y,m=p;switch(a){case"start":s[i]=n,y=u++;break;case"end":delete s[i],--u;case"drag":p=tS(c||o,e),y=u}g.call(a,t,new er(a,{sourceEvent:o,subject:d,target:f,identifier:i,active:y,x:p[0]+l,y:p[1]+h,dx:p[0]-m[0],dy:p[1]-m[1],dispatch:g}),r)}}return f.filter=function(t){return arguments.length?(i="function"==typeof t?t:en(!!t),f):i},f.container=function(t){return arguments.length?(a="function"==typeof t?t:en(t),f):a},f.subject=function(t){return arguments.length?(o="function"==typeof t?t:en(t),f):o},f.touchable=function(t){return arguments.length?(l="function"==typeof t?t:en(!!t),f):l},f.on=function(){var t=c.on.apply(c,arguments);return t===c?f:t},f.clickDistance=function(t){return arguments.length?(h=(t*=1)*t,f):Math.sqrt(h)},f})().on("start",nz).on("drag",nG).on("end",nK));return e.append("circle").attr("class","highlight-circle hidden").attr("fill","none").attr("opacity",.8).attr("r",t=>t.radius+10),e.append("circle").attr("class",nc.boolState?nc.DOMObjectString:nc.DOMObjectString+" hidden").attr("fill",t=>t.color).attr("id",t=>"circle-"+t.id).attr("opacity",.6).attr("r",t=>t.radius).attr("stroke",t=>t.isFixed?"black":"none").attr("stroke-width",t=>3*!!t.isFixed).on("mouseover",function(t,e){let n=document.getElementById("spawn-cand-stress-"+e.id);n&&n.setAttribute("opacity",.6),(n=document.getElementById("spawn-cand-cancel-"+e.id))&&n.setAttribute("opacity",.6),(n=document.getElementById("spawn-cand-netForceArrow-"+e.id))&&n.setAttribute("opacity",.6),(n=document.getElementById("hotspot-group-"+e.id))&&n.setAttribute("opacity",.6),(n=document.getElementById("node-relations-"+e.id))&&n.classList.add("node-relation-hover")}).on("mouseout",function(t,e){let n=document.getElementById("spawn-cand-stress-"+e.id);n&&n.setAttribute("opacity","0"),(n=document.getElementById("spawn-cand-cancel-"+e.id))&&n.setAttribute("opacity","0"),(n=document.getElementById("spawn-cand-netForceArrow-"+e.id))&&n.setAttribute("opacity","0"),(n=document.getElementById("hotspot-group-"+e.id))&&n.setAttribute("opacity","0.2"),(n=document.getElementById("node-relations-"+e.id))&&n.classList.remove("node-relation-hover")}),e.append("rect").attr("class",t=>t.representation?"icon icon-bg icon-"+t.representation:"icon icon-bg").attr("fill","none").attr("opacity",.8).attr("rx",4).attr("x",t=>-t.radius/Math.SQRT2).attr("y",t=>-t.radius/Math.SQRT2).attr("width",t=>t.radius/Math.SQRT2*2).attr("height",t=>t.radius/Math.SQRT2*2),e.append("svg:image").attr("href",t=>"none"!=t.representation?nv[t.representation]:"").attr("x",t=>-t.radius/Math.SQRT2).attr("y",t=>-t.radius/Math.SQRT2).attr("width",t=>t.radius/Math.SQRT2*2).attr("height",t=>t.radius/Math.SQRT2*2).attr("class","node-icon").attr("fill","white").style("pointer-events","none"),e.append("text").attr("class",e6.boolState?e6.DOMObjectString:e6.DOMObjectString+" hidden").attr("id",t=>e6.boolState?e6.DOMObjectString+"-"+t.id:e6.DOMObjectString+"-"+t.id+" hidden").attr("dx",0).attr("dy",t=>-t.radius-2).text(t=>t.id),e.append("text").attr("class","coord-label").attr("id",t=>"coord-label-"+t.id).attr("dx",0).attr("dy",t=>t.radius+15),e.append("g").attr("class","force-arrows").attr("id",t=>"force-arrows-"+t.id),e.append("g").attr("class","node-relations").attr("id",t=>"node-relations-"+t.id),e.each(function(t){}),e},t=>t,t=>{t.remove()})).attr("transform",t=>`translate(${t.x}, ${t.y})`),t}async function nU(){let t={id:"spawn-"+Date.now().toString(36).slice(-4),color:nx[Math.floor(Math.random()*nx.length)],radius:10+30*Math.random(),representation:function(){let t=Math.floor(Math.random()*nm.length);return nm[t].key}(),isFixed:!1,significance:1,hotspots:function(t=1){let e=[];for(let n=0;n<t;n++)e.push({x:nN*(Math.random()-.5),y:nN*(Math.random()-.5),intensityFactor:1,width:40+160*Math.random(),height:40+160*Math.random(),forceType:"attract"});return e}(Math.floor(4*Math.random())+2)};await nB(e5,t,nV,nE,nL,nP,nk,nO,nA,80,20,20),np(nM,e5,nP),nC(nS,e5),nV.nodes(e5),nV.alpha(1).restart()}async function nB(t,e,n,r,i,a,o,l,s,c=80,u=20,h=20){t.map(t=>({x:t.x,y:t.y,vx:t.vx,vy:t.vy}));let f=-1/0,d=1/0,g=-1/0,p=-1/0,y=null,m=nN/u,v=nN/h,b=document.getElementById(no.DOMObjectString).childNodes;b&&b.forEach(t=>{t.setAttribute("opacity",0)});let x=document.getElementById(ni.DOMObjectString).childNodes;x&&x.forEach(t=>{t.setAttribute("opacity",0)});let w=document.getElementById(ns.DOMObjectString).childNodes;w&&w.forEach(t=>{t.setAttribute("opacity",0)});let _=o.append("g").attr("id","spawn-cand-cancel-"+e.id).attr("class",no.boolState?no.DOMObjectString:no.DOMObjectString+" hidden").attr("style","transition: all ease-in-out 0.2s;").attr("opacity","0.5"),S=l.append("g").attr("id","spawn-cand-stress-"+e.id).attr("class",ni.boolState?ni.DOMObjectString:ni.DOMObjectString+" hidden").attr("style","transition: all ease-in-out 0.2s;").attr("opacity","0.5"),M=s.append("g").attr("id","spawn-cand-netForceArrow-"+e.id).attr("class",ns.boolState?ns.DOMObjectString:ns.DOMObjectString+" hidden").attr("style","transition: all ease-in-out 0.2s;").attr("opacity","0.5");for(let n=0;n<h;n++)for(let r=0;r<u;r++){let i=(r+.5)*m-nN/2,o=(n+.5)*v-nN/2,l=structuredClone(e);l.x=i,l.y=o,l.id+=`-g${r}-${n}`,l.hotspots.forEach(t=>ny(a,l.color)),t.push(l);let s=eS(t.concat(l)).force("gauss",e8(1.5)).force("coll",e4);s.tick();let u=l.vx,h=l.vy;for(let t=1;t<c;t++)s.tick();s.stop();let b=l.forces.reduce((t,e)=>t+Math.hypot(e.fx,e.fy),0),x=b-Math.hypot(l.forces.reduce((t,e)=>t+e.fx,0),l.forces.reduce((t,e)=>t+e.fy,0)),w=_.append("g").attr("transform",`translate(${i},${o})`);w.append("rect").attr("cancel",x).attr("width",m).attr("height",v).attr("x",-m/2).attr("y",-v/2).attr("fill",l.color).attr("fill-opacity",.125*x/10),w.append("text").attr("class",nl.boolState?nl.DOMObjectString+" graph-label":nl.DOMObjectString+" graph-label hidden").attr("x",0).attr("dy","20px").append("tspan").text(`${x.toFixed(1)}`).attr("dy","0em");let k=S.append("g").attr("transform",`translate(${i},${o})`);k.append("rect").attr("stress",b).attr("width",m).attr("height",v).attr("x",-m/2).attr("y",-v/2).attr("fill",l.color).attr("fill-opacity",.125*b/10),k.append("text").attr("class",na.boolState?na.DOMObjectString+" graph-label":na.DOMObjectString+" graph-label hidden").attr("x",0).attr("dy","20px").append("tspan").text(`${b.toFixed(1)}`).attr("dy","1.2em");let O=M.append("g").attr("transform",`translate(${i},${o})`),A=Math.sqrt(u**2+h**2),E=Math.min(5*A,1e3),L=Math.atan2(h,u);O.append("line").attr("x1",0).attr("y1",0).attr("x2",E*Math.cos(L)).attr("y2",E*Math.sin(L)).attr("netForceMagnitude",A).attr("netLength",E).attr("stroke",l.color).attr("stroke-width",3).attr("marker-end","url(#arrowhead-"+l.color+")").style("opacity",A>.9?.8:.5),x>g&&(g=x),b<d&&(d=b),b>f&&(f=b,y=structuredClone(l)),E>p&&(p=E),t.pop(),nS.selectAll(".node-group").filter(t=>t.id===l.id).remove()}document.getElementById("spawn-cand-cancel-"+e.id).childNodes.forEach((t,e)=>{t.firstChild.setAttribute("fill-opacity",.5*t.firstChild.getAttribute("cancel")/g),t.firstChild.setAttribute("r",m/2*t.firstChild.getAttribute("cancel")/g)}),document.getElementById("spawn-cand-stress-"+e.id).childNodes.forEach((t,e)=>{t.firstChild.setAttribute("fill-opacity",.5*t.firstChild.getAttribute("stress")/f)}),document.getElementById("spawn-cand-netForceArrow-"+e.id).childNodes.forEach((t,e)=>{let n=t.firstChild.getAttribute("netLength")/p;t.firstChild.setAttribute("x2",t.firstChild.getAttribute("x2")/p*n*m/2),t.firstChild.setAttribute("y2",t.firstChild.getAttribute("y2")/p*n*v/2)}),y.id=e.id,console.log("spawned "+y.id+" at "+(y.x/nF).toFixed(0)+", "+(-y.y/nF).toFixed(0)),t.splice(t.length,0,y),n.nodes(t).alpha(1).restart()}async function nq(t,e,n,r,i,a,o,l,s,c,u,h=1e3){let f=t.slice();async function d(){if(0===f.length)return;let t=structuredClone(f.shift());t.id+="-"+Date.now().toString(36).slice(-4),"random"===t.color&&(t.color=nx[Math.floor(Math.random()*nx.length)]),function(t,e){t.forEach(t=>{t.y=t.y*e,t.x=t.x*e,t.radius=t.radius*e,t.hotspots.forEach(t=>{t.x=t.x*e,t.y=t.y*e,t.width=t.width*e,t.height=t.height*e})})}([t],nF),function(t){t.forEach(t=>{t.y=-t.y,t.hotspots.forEach(t=>{t.y=-t.y})})}([t]),function(t){t.forEach(t=>{t.isFixed&&(t.fx=t.x,t.fy=t.y)})}([t]),await nB(e,t,n,r,i,a,s,c,u,80,20,20),np(o,e,a),nC(l,e),n.nodes(e).alpha(1).restart(),setTimeout(d,h)}d()}!function(t,e){let n=t.append("g").attr("id","arrows").attr("class","arrows");n.append("marker").attr("id","arrowhead-white").attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerWidth",4).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M0,0 L10,5 L0,10 Z").attr("fill","white"),e.forEach(t=>{n.append("marker").attr("id","arrowhead-"+t).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerWidth",4).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M0,0 L10,5 L0,10 L2,5 Z").attr("fill",t)})}(nP,nx),function(t,e,n){let r=t.append("g").attr("id","heatmapGradients").attr("width",100).attr("height",100);n.forEach(t=>{let e=r.append("radialGradient").attr("id",`forceGradient-${t}`).attr("width",100).attr("height",100).attr("cx","50%").attr("cy","50%").attr("r","50%");e.append("stop").attr("offset","0%").style("stop-color",t).style("stop-opacity",.4),e.append("stop").attr("offset","100%").style("stop-color",t).style("stop-opacity",.1)})}(nP,0,nx),np(nM,e5,nP),function(){let t=document.getElementById("UIContainer");nf.forEach((e,n)=>{var r,i;r=e.defaultState,i=e.URLParamString,e.boolState=r=nh.get(i)?"true"==nh.get(i)||1==nh.get(i)||"false"!=nh.get(i)&&0!=nh.get(i)&&r:r;let a=document.createElement("label");e.shownInViewPanel||a.setAttribute("style","display:none;");let o=document.createElement("input");o.id=e.ToggleObjectString,o.type="checkbox",o.setAttribute("keyboardShortcut",e.keyboardShortcut),a.appendChild(o);let l=document.createElement("span");l.textContent=" [ "+e.keyboardShortcutLetter+" ] "+e.UILabelString,a.appendChild(l),t.appendChild(a),document.getElementById(e.ToggleObjectString).checked=e.boolState,nd(e.boolState,"."+e.DOMObjectString,e.shorthandString,e.URLParamString,e.defaultState);let s=document.getElementById(e.ToggleObjectString);s&&s.addEventListener("change",function(){e.boolState=this.checked,nd(e.boolState,"."+e.DOMObjectString,e.shorthandString,e.URLParamString,e.defaultState)})})}();const nV=eS(e5).force("travel",function(t){let e=performance.now();function n(){let n=performance.now(),r=(n-e)/1e3;e=n,t.forEach(t=>{if("line"!==t.travelMode||t.travelDone)return;let e=t.travelTo.x-t.travelFrom.x,n=t.travelTo.y-t.travelFrom.y,i=Math.hypot(e,n);if(0===i){t.travelDone=!0;return}let a=t.travelSpeed;if(t.travelDist=(t.travelDist??0)+a*r,t.travelDist>=i)t.x=t.fx=t.travelTo.x,t.y=t.fy=t.travelTo.y,t.vx=t.vy=0,t.radius=t.radiusFinal,t.travelDone=!0;else{let r=t.travelDist/i;t.x=t.fx=t.travelFrom.x+r*e,t.y=t.fy=t.travelFrom.y+r*n,t.radius=t.radiusFinal*r}})}return n.initialize=e=>t=e,n}(e5)).force("repel",(function(){var t,e,n,r,i,a=ey(-30),o=1,l=1/0,s=.81;function c(n){var i,a=t.length,o=ef(t,ex,ew).visitAfter(h);for(r=n,i=0;i<a;++i)e=t[i],o.visit(f)}function u(){if(t){var e,n,r=t.length;for(e=0,i=Array(r);e<r;++e)i[(n=t[e]).index]=+a(n,e,t)}}function h(t){var e,n,r,a,o,l=0,s=0;if(t.length){for(r=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(l+=e.value,s+=n,r+=n*e.x,a+=n*e.y);t.x=r/s,t.y=a/s}else{(e=t).x=e.data.x,e.y=e.data.y;do l+=i[e.data.index];while(e=e.next)}t.value=l}function f(t,a,c,u){if(!t.value)return!0;var h=t.x-e.x,f=t.y-e.y,d=u-a,g=h*h+f*f;if(d*d/s<g)return g<l&&(0===h&&(g+=(h=em(n))*h),0===f&&(g+=(f=em(n))*f),g<o&&(g=Math.sqrt(o*g)),e.vx+=h*t.value*r/g,e.vy+=f*t.value*r/g),!0;if(!t.length&&!(g>=l)){(t.data!==e||t.next)&&(0===h&&(g+=(h=em(n))*h),0===f&&(g+=(f=em(n))*f),g<o&&(g=Math.sqrt(o*g)));do t.data!==e&&(d=i[t.data.index]*r/g,e.vx+=h*d,e.vy+=f*d);while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,u()},c.strength=function(t){return arguments.length?(a="function"==typeof t?t:ey(+t),u(),c):a},c.distanceMin=function(t){return arguments.length?(o=t*t,c):Math.sqrt(o)},c.distanceMax=function(t){return arguments.length?(l=t*t,c):Math.sqrt(l)},c.theta=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c})().strength(t=>t.isFixed?0:-50)).force("collide",(function(t){var e,n,r,i=1,a=1;function o(){for(var t,o,s,c,u,h,f,d=e.length,g=0;g<a;++g)for(t=0,o=ef(e,ev,eb).visitAfter(l);t<d;++t)f=(h=n[(s=e[t]).index])*h,c=s.x+s.vx,u=s.y+s.vy,o.visit(p);function p(t,e,n,a,o){var l=t.data,d=t.r,g=h+d;if(l){if(l.index>s.index){var p=c-l.x-l.vx,y=u-l.y-l.vy,m=p*p+y*y;m<g*g&&(0===p&&(m+=(p=em(r))*p),0===y&&(m+=(y=em(r))*y),m=(g-(m=Math.sqrt(m)))/m*i,s.vx+=(p*=m)*(g=(d*=d)/(f+d)),s.vy+=(y*=m)*g,l.vx-=p*(g=1-g),l.vy-=y*g)}return}return e>c+g||a<c-g||n>u+g||o<u-g}}function l(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,a=e.length;for(r=0,n=Array(a);r<a;++r)n[(i=e[r]).index]=+t(i,r,e)}}return"function"!=typeof t&&(t=ey(null==t?1:+t)),o.initialize=function(t,n){e=t,r=n,s()},o.iterations=function(t){return arguments.length?(a=+t,o):a},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:ey(+e),s(),o):t},o})().radius(t=>t.radius+10).strength(1.2)).force("gaussian",e8(1.5)).force("customCollision",e4).on("tick",function(){t&&(t.attr("transform",t=>`translate(${t.x}, ${t.y})`),e9.boolState&&t.select("."+e9.DOMObjectString).text(t=>`(${Math.round(t.x/nF)}, ${Math.round(-t.y/nF)})`),t.selectAll("."+e7.DOMObjectSingleString+", ."+e7.DOMObjectSingleString+"-value, ."+e7.DOMObjectSingleString+"-label-group").remove(),t.selectAll("."+nn.DOMObjectSingleString+", ."+nn.DOMObjectSingleString+"-value, ."+nn.DOMObjectSingleString+"-label-group").remove(),t.select("."+nc.DOMObjectString).attr("r",t=>t.radius).attr("stroke",t=>t.isFixed?"black":"none").attr("stroke-width",t=>3*!!t.isFixed),t.select(".highlight-circle").attr("r",t=>t.radius+10),t.each(function(t){let e=ts(this).select("."+e7.DOMObjectString),n=ts(this).select("."+nn.DOMObjectString);if(t.hotspots.forEach((e,r)=>{n.append("line").attr("class",nn.boolState?nn.DOMObjectSingleString:nn.DOMObjectSingleString+" hidden").attr("x1",0).attr("y1",0).attr("x2",-t.x+e.x).attr("y2",-t.y+e.y).attr("stroke",t.color).attr("stroke-width",4).attr("stroke-dasharray","0,20").attr("stroke-linecap","round").style("opacity",.2)}),t.forces.forEach((n,r)=>{let i=Math.min(2*Math.sqrt(n.fx**2+n.fy**2),1e3),a=Math.atan2(n.fy,n.fx),o=(a+Math.PI/2)/Math.PI*180%180,l=(+i+35)*Math.cos(a)+2*r-t.forces.length/2,s=(+i+35)*Math.sin(a)+2*r-t.forces.length/2;e.append("line").attr("class",n.source.includes("collision")?e7.boolState?e7.DOMObjectSingleString+" "+e7.DOMObjectSingleString+"-orange":e7.DOMObjectSingleString+" "+e7.DOMObjectSingleString+"-orange hidden":e7.boolState?e7.DOMObjectSingleString+" "+e7.DOMObjectSingleString+"-white":e7.DOMObjectSingleString+" "+e7.DOMObjectSingleString+"-white hidden").attr("x1",0).attr("y1",0).attr("x2",i*Math.cos(a)).attr("y2",i*Math.sin(a)).attr("stroke",n.source.includes("collision")?"orange":"white").attr("stroke-width",5).attr("marker-end","url(#arrowhead-"+(n.source.includes("collision")?"orange":"white")+")").style("opacity",.5);let c=e.append("g").attr("class",e7.boolState&&nt.boolState?e7.DOMObjectSingleString+"-label-group":e7.DOMObjectSingleString+"-label-group hidden").attr("transform",`translate(${l},${s})`).attr("opacity",.3),u=c.append("rect").attr("class",e7.DOMObjectSingleString+"-label-bg").attr("x",-20).attr("y",-10).attr("width",40).attr("height",20).attr("rx",4).attr("fill","rgba(0,0,0)").attr("transform",`rotate(${o>90?o-180:o})`),h=c.append("text").attr("class",e7.DOMObjectSingleString+"-label-text").attr("x",0).attr("y",0).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","white").attr("font-size",12).text(i.toFixed(0)+" ∠"+o.toFixed(0)+"°").attr("transform",`rotate(${o>90?o-180:o})`).node().getBBox();u.attr("x",h.x-4).attr("y",h.y-2).attr("width",h.width+8).attr("height",h.height+4)}),e7.boolState){let n=t.vx,r=t.vy,i=Math.sqrt(n**2+r**2);if(i>.1){let t=Math.min(5*i,1e3),a=Math.atan2(r,n);e.append("line").attr("class",e7.boolState?e7.DOMObjectSingleString+" net-force-arrow":e7.DOMObjectSingleString+" net-force-arrow hidden").attr("x1",0).attr("y1",0).attr("x2",t*Math.cos(a)).attr("y2",t*Math.sin(a)).attr("stroke","red").attr("stroke-width",3).attr("marker-end","url(#arrowhead-red)").style("opacity",i>.9?.8:.5)}}}),function(t){let e=nD.selectAll("tr").data(t,t=>t.id).join("tr").attr("data-id",t=>t.id).on("mouseenter",nY).on("mouseleave",nX);e.each(t=>{let e=t.forces??[],n=e.reduce((t,e)=>t+Math.hypot(e.fx,e.fy),0),r=Math.hypot(e.reduce((t,e)=>t+e.fx,0),e.reduce((t,e)=>t+e.fy,0));t._sumF=n,t._netF=r,t._cancel=n-r}),e.selectAll("td.rowLabel").data(t=>[t]).join(t=>t.append("td").attr("class","rowLabel").html(t=>`
         <span class="name">${t.id}</span>
         <button class="remove-btn"
                 title="Delete ${t.id}"
                 data-id="${t.id}">\u{2715}</button>`),t=>t),e.selectAll("td.metric").data(t=>[(t.x/nF).toFixed(0),(-t.y/nF).toFixed(0),t._sumF.toFixed(0),t._netF.toFixed(0),t._cancel.toFixed(0),t.vx.toFixed(0),t.vy.toFixed(0)]).join(t=>t.append("td").attr("class","metric").text(t=>t),t=>t.text(t=>t));let{sum:n,avg:r}=function(t){let e=t.length||1,n={x:0,y:0,sumF:0,netF:0,cancel:0,vx:0,vy:0};t.forEach(t=>{n.x+=t.x,n.y+=t.y,n.sumF+=t._sumF,n.netF+=t._netF,n.cancel+=t._cancel,n.vx+=t.vx,n.vy+=t.vy});let r=Object.fromEntries(Object.entries(n).map(([t,n])=>[t,n/e]));return{sum:n,avg:r}}(t),i=[["Σ",null,null,n.sumF,n.netF,n.cancel,n.vx,n.vy],["μ",null,null,r.sumF,r.netF,r.cancel,r.vx,r.vy]];nH.selectAll("tr").data(i).join("tr").selectAll("td").data(t=>t).join("td").text(t=>Number.isFinite(t)?t.toFixed(0):t??"")}(e5))});function nY(){let t=this.dataset.id;ts(`#node-group-${t} .highlight-circle`).classed("hidden",!1).classed("haloSpin",!0)}function nX(){let t=this.dataset.id;ts(`#node-group-${t} .highlight-circle`).classed("hidden",!0).classed("haloSpin",!1)}function nz(t,e){nV.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}function nG(t,e){e.fx=t.x,e.fy=t.y}function nK(t,e){e.isFixed||(e.fx=null,e.fy=null,nV.alphaTarget(0))}function nW(t,e){e.isFixed=!e.isFixed,e.isFixed?(e.fx=e.x,e.fy=e.y):(e.fx=null,e.fy=null),ts(this).select("circle").transition().duration(200).attr("stroke",e.isFixed?"black":"none").attr("stroke-width",3*!!e.isFixed),nV.alpha(.5).restart()}let nQ=null;document.getElementById("removeAllButton").addEventListener("click",function(){console.log("removed all nodes.","red"),e5.splice(0,e5.length),document.getElementById(ni.DOMObjectString).innerHTML="",document.getElementById(no.DOMObjectString).innerHTML="",document.getElementById(ns.DOMObjectString).innerHTML="",nC(nS,e5),np(nM,e5,nP),nV.nodes(e5),nV.alpha(1).restart()}),document.getElementById("addOneSmartButton").addEventListener("click",nU);const nZ=document.getElementById("spawnButtonContainer"),nJ=document.getElementById("spawnButtonContainerExtended");function n0(t,e){t.forEach(({name:t,nodes:n,notDraggable:r=!1})=>{let i=document.createElement("div");i.className="button-container";let a=document.createElement("button");a.textContent=t,a.id=`spawnButton-${t}`,a.addEventListener("click",()=>{nq(n,e5,nV,nE,nL,nP,nM,nS,nk,nO,nA,1e3)});let o=document.createElement("span");o.className=r?"drag-icon hidden":"drag-icon",o.draggable=!0,o.textContent="☰",i.append(a,o),e.append(i)})}nZ&&(n0(e3,nZ),document.querySelectorAll(".button-container").forEach(t=>{let e=t.querySelector(".drag-icon");e&&(e.addEventListener("dragstart",e=>{e.stopPropagation(),nQ=t,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.innerHTML),t.classList.add("dragging")}),e.addEventListener("dragend",()=>{nQ&&nQ.classList.remove("dragging")}),t.addEventListener("dragover",e=>{e.preventDefault(),e.stopPropagation(),t.classList.add("highlight")}),t.addEventListener("dragleave",()=>{t.classList.remove("highlight")}),t.addEventListener("drop",e=>{if(e.stopPropagation(),e.preventDefault(),nQ&&nQ!==t){let n=t.getBoundingClientRect(),r=n.y+n.height/2;e.clientY-r>0?t.after(nQ):t.before(nQ)}t.classList.remove("highlight")}))})),nJ&&n0([{name:"Keep-Free",notDraggable:!0,nodes:[{id:"Keep-Free",representation:"none",x:0,y:-5,color:"rgba(0,0,0,0)",radius:10,isFixed:!0,significance:100,hotspots:[]}]},{name:"Moving Keep-Free",notDraggable:!0,nodes:[{id:"Moving Keep-Free",representation:"none",x:0,y:-5,color:"rgba(0,0,0,0)",radius:5,isFixed:!0,significance:100,travelMode:"line",travelPhase:0,travelSpeed:100,travelFrom:{x:0,y:0},travelTo:{x:-30,y:400},radiusFinal:30,hotspots:[]}]}],nJ);const n1=document.querySelector(".metrics");n1.addEventListener("mouseover",t=>{let e=t.target;if("TD"===e.tagName||"TH"===e.tagName){let t=e.cellIndex;n1.querySelectorAll("tr").forEach(e=>{let n=e.querySelectorAll("td, th");n[t]&&(n[t].style.backgroundColor="#ffffaa")})}}),n1.addEventListener("mouseout",t=>{let e=t.target;if("TD"===e.tagName||"TH"===e.tagName){let t=e.cellIndex;n1.querySelectorAll("tr").forEach(e=>{let n=e.querySelectorAll("td, th");n[t]&&(n[t].style.backgroundColor="")})}}),nD.on("click",function(t){t.target.classList.contains("remove-btn")&&(console.log("remove node"+t.target.dataset.id,"red"),function(t){let e=e5.findIndex(e=>e.id===t);-1!==e&&(e5.splice(e,1),ts(`#node-group-${t}`).remove(),ts(`#hotspot-group-${t}`).remove(),ts(`#spawn-cand-stress-${t}`).remove(),ts(`#spawn-cand-cancel-${t}`).remove(),ts(`#spawn-cand-netForceArrow-${t}`).remove(),np(nM,e5,nP),nC(nS,e5),nV.nodes(e5).alpha(1).restart())}(t.target.dataset.id))}),window.addEventListener("resize",function(){let t=window.innerWidth,e=window.innerHeight;nw.attr("width",t).attr("height",e);let n=Math.min(t,e)/nN;n_.attr("transform",`translate(${t/2}, ${e/2}) scale(${n})`)}),addEventListener("keydown",function(t){for(let e of document.getElementById("UIContainer").getElementsByTagName("input")){let n=e.getAttribute("keyboardShortcut");if(t.code===n){e.checked=!e.checked,e.dispatchEvent(new Event("change"));break}}for(let e of document.getElementById("debug-panel").getElementsByTagName("button")){let n=e.getAttribute("keyboardShortcut");if(t.code===n){e.click();break}}});
//# sourceMappingURL=index.a04c5f49.js.map
